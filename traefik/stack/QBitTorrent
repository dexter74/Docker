###############
# Déploiement #
###############
# Créer le conteneur, arrêter puis taper la commande et relancer.
#
# echo "WebUI\HostHeaderValidation=false"  >> /home/docker/volumes/QBitTorrent/qBittorrent/qBittorrent.conf

  QBitTorrent:
    container_name: QBitTorrent
    image: 'linuxserver/qbittorrent'
    environment:
      TZ: 'Europe/Paris'
      PUID: '1001'
      PGID: '74240'
      UMASK_SET: '022'
      WEBUI_PORT: '8081'
    volumes:
      - /home/docker/volumes/QBitTorrent/:/config
      - /home/docker/volumes/QBitTorrent/downloads:/downloads
      - Films:/mnt/Films
      - Video:/mnt/Video
    networks:
      - traefik_network
    labels:
      - "traefik.enable=true"                                                  # Activer la publication du container
      - "traefik.docker.network=traefik_network"                               # Précise à Traefik quel réseau utilise le container XXXX.
      - "traefik.http.routers.QBitTorrent.entrypoints=test"                    # Traefik.toml
      - "traefik.http.routers.QBitTorrent.rule=Host(`drthrax74.ddns.net`)"     # Requête arrivant sur http://mondomaine.com sera transmise au container NOM_DU_CONTAINER.
      - "traefik.http.services.QBitTorrent.loadbalancer.server.port=8081"      # Le port du container sur lequel les requêtes doivent être transmises
      - "traefik.http.routers.QBitTorrent.tls=true"                            # Support SSL/TLS.
      - "traefik.http.routers.QBitTorrent.tls.certresolver=leresolver"         # Précise le résolveur et donc les certificats à utiliser.
    ports:
      - 8081:8081
