############################################################
# Stack qui utilise a comme permission de dossier www-data #
############################################################

#################
version: '2.4'  #
#################

############
services:  #
############

#############
# Wordpress #
#########################################################################
# Wordpress : https://hub.docker.com/_/wordpress                        #
# Compte    : www-data:www-data                                         #
  wordpress:                                                            #
    container_name: wordpress                                           #
    image: wordpress                                                    #
    restart: always                                                     #
    environment:                                                        #
      WORDPRESS_DB_HOST: 'mysql'                                        #
      WORDPRESS_DB_USER:  'admin'                                       #
      WORDPRESS_DB_PASSWORD: 'admin'                                    #
      WORDPRESS_DB_NAME: 'database'                                     #
      WORDPRESS_TABLE_PREFIX: 'wp_'                                     #
    volumes:                                                            #
      - /home/docker/container/www-data/Wordpress:/var/www/html         #
    external_links:                                                     #
      - mysql                                                           #
    ports:                                                              #
      - 27017:80                                                        #
#########################################################################


##########
# Joomla #
#########################################################################
  joomla:
    hostname: "joomla"
    domainname: "lan"
    image: joomla
    container_name: test
    external_links:
      - mysql
    volumes:
      - /home/docker/container/www-data/joomla
      - /home/docker/container/www-data/joomla:/var/www/html
    environment:
      JOOMLA_DB_HOST: mysql
      JOOMLA_DB_NAME: database
      JOOMLA_DB_USER: admin
      JOOMLA_DB_PASSWORD: admin
    ports:
      - 8080:80
#########################################################################
